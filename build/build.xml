<?xml version="1.0"?>

<project name="demo.vafpress.com/vafpress-framework" default="main">

	<property file="build.properties" />

	<target name="cleanup">
		<delete>
			<fileset dir="${build.dir}">
				<include name="**" />
			</fileset>
		</delete>
	</target>

	<target name="copy.all">
		<copy toDir="${build.dir}">
			<fileset dir="${base.dir}">
				<exclude name=".git/**" />
				<exclude name="build/**" />
				<exclude name=".gitignore" />
			</fileset>
		</copy>
	</target>

	<target name="copy.new">
		<copy toDir="${build.dir}" overwrite="true">
			<fileset dir="${base.dir}/build/files">
				<include name="functions.php" />
				<include name="index.php" />
			</fileset>
		</copy>
	</target>

	<target name="update.role">
		<reflexive>
			<fileset dir="${build.dir}/vafpress/config/option">
				<include pattern="main.php" />
			</fileset>
			<filterchain>
				<replaceregexp>
					<regexp pattern="${before.role}" replace="${after.role}"/>
				</replaceregexp>
			</filterchain>
		</reflexive>
	</target>

	<target name="main" depends="cleanup, copy.all, copy.new, update.role">
	</target>
	
</project>